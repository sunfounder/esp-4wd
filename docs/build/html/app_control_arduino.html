

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>APP control &mdash; esp-4wd_car_kit  documentation</title>
  

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="For Python User" href="For%20Python%20User.html" />
    <link rel="prev" title="Code Control" href="code_control_arduino.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> esp-4wd_car_kit
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="Components%20List.html">Components List</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="For%20Arduino%20User.html">For Arduino User</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="set_up_your_arduino.html">Setup Your Arduino</a></li>
<li class="toctree-l2"><a class="reference internal" href="component_testing_arduino.html">Component Testing by Arduino</a></li>
<li class="toctree-l2"><a class="reference internal" href="hardware_assembly_arduino.html">Hardware Assembling</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="play_arduino.html">Play the car with Arduino</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="code_control_arduino.html">Code Control</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">APP control</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#install-sunfounder-controller">Install Sunfounder Controller</a></li>
<li class="toctree-l4"><a class="reference internal" href="#about-sunfounder-controller">About Sunfounder Controller</a></li>
<li class="toctree-l4"><a class="reference internal" href="#establish-communication">Establish Communication</a></li>
<li class="toctree-l4"><a class="reference internal" href="#app-operation">APP Operation</a></li>
<li class="toctree-l4"><a class="reference internal" href="#diy-remote-control">DIY Remote Control</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="For%20Python%20User.html">For Python User</a></li>
<li class="toctree-l1"><a class="reference internal" href="FAQ.html">FAQ</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">esp-4wd_car_kit</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="For%20Arduino%20User.html">For Arduino User</a> &raquo;</li>
        
          <li><a href="play_arduino.html">Play the car with Arduino</a> &raquo;</li>
        
      <li>APP control</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="_sources/app_control_arduino.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="app-control">
<h1>APP control<a class="headerlink" href="#app-control" title="Permalink to this headline">¶</a></h1>
<p>In this chapter, you will learn to use a APP - Sunfounder Controller to control the car.</p>
<div class="section" id="install-sunfounder-controller">
<h2>Install Sunfounder Controller<a class="headerlink" href="#install-sunfounder-controller" title="Permalink to this headline">¶</a></h2>
<p>Open App Store (iOS/Mac OS X system) or Play Store (Android/Windows/Linux system), then search and download Sunfounder Controller.</p>
<a class="reference internal image-reference" href="_images/arduino_app1.png"><img alt="_images/arduino_app1.png" class="align-center" src="_images/arduino_app1.png" style="width: 500px;" /></a>
</div>
<div class="section" id="about-sunfounder-controller">
<h2>About Sunfounder Controller<a class="headerlink" href="#about-sunfounder-controller" title="Permalink to this headline">¶</a></h2>
<div class="section" id="page-introduction">
<h3>Page Introduction<a class="headerlink" href="#page-introduction" title="Permalink to this headline">¶</a></h3>
<p>Start the Sunfounder Controller.</p>
<a class="reference internal image-reference" href="_images/arduino_app2.png"><img alt="_images/arduino_app2.png" class="align-center" src="_images/arduino_app2.png" style="width: 150px;" /></a>
<p>Click the middle button to add a new controller.</p>
<a class="reference internal image-reference" href="_images/arduino_app3.png"><img alt="_images/arduino_app3.png" class="align-center" src="_images/arduino_app3.png" style="width: 450px;" /></a>
<p>Sunfounder Controller is a platform that can add custom remote control handles. It
reserves many widget interfaces. There are a total of 17 areas from A to Q. Each area
has selectable widgets.</p>
<a class="reference internal image-reference" href="_images/arduino_app4.png"><img alt="_images/arduino_app4.png" class="align-center" src="_images/arduino_app4.png" style="width: 450px;" /></a>
<p>The available widgets in the large square area include joystick and cross-shaped
steering wheel.</p>
<a class="reference internal image-reference" href="_images/arduino_app5.png"><img alt="_images/arduino_app5.png" class="align-center" src="_images/arduino_app5.png" style="width: 400px;" /></a>
<p>The available widgets in the small square area include buttons, digital displays and
switches.</p>
<a class="reference internal image-reference" href="_images/arduino_app6.png"><img alt="_images/arduino_app6.png" class="align-center" src="_images/arduino_app6.png" style="width: 360px;" /></a>
<p>The available widgets for the rectangular area include slider, dial, ultrasonic radar and
grayscale detection tool.</p>
<a class="reference internal image-reference" href="_images/arduino_app7.png"><img alt="_images/arduino_app7.png" class="align-center" src="_images/arduino_app7.png" style="width: 510px;" /></a>
</div>
<div class="section" id="widget-list">
<h3>Widget List<a class="headerlink" href="#widget-list" title="Permalink to this headline">¶</a></h3>
<p>For the convenience of writing code, this chapter will introduce the use of various
widgets on Sunfounder Controller, the parameter types and ranges of control widgets,
and the parameter types and ranges of display widgets.</p>
<p>The control widgets of Sunfounder Controller include buttons, switches, joystick,
cross-shaped steering wheel, and slider.</p>
<p>You can modify the widget name and the parameter range of some widgets by clicking
the icon in the upper right corner of the widget.</p>
<a class="reference internal image-reference" href="_images/arduino_app8.png"><img alt="_images/arduino_app8.png" class="align-center" src="_images/arduino_app8.png" style="width: 550px;" /></a>
<p>When we use these control widgets, ESP-4WD RDP will receive the control data.
Through these control data, we can write code to control the car.</p>
<a class="reference internal image-reference" href="_images/arduino_app9.png"><img alt="_images/arduino_app9.png" class="align-center" src="_images/arduino_app9.png" style="width: 700px;" /></a>
<p>The display widget of Sunfounder Controller includes digital displays, dial, ultrasonic
radar, and grayscale detection tool.</p>
<p>When we send sensor data to these display widgets, we can display the data on the
corresponding widgets. At the same time, you can also modify the name, unit and
parameter range of the display widget by clicking the icon in the upper right
corner.</p>
<a class="reference internal image-reference" href="_images/arduino_app10.png"><img alt="_images/arduino_app10.png" class="align-center" src="_images/arduino_app10.png" style="width: 700px;" /></a>
</div>
</div>
<div class="section" id="establish-communication">
<h2>Establish Communication<a class="headerlink" href="#establish-communication" title="Permalink to this headline">¶</a></h2>
<p>In addition to the Arduino control method, we also provide the APP control method.
You can open Sunfounder Controller on mobile phones, tablets and other devices,
and then make a controller to control ESP-4WD Car.</p>
<div class="section" id="run-the-code">
<h3>Run the code<a class="headerlink" href="#run-the-code" title="Permalink to this headline">¶</a></h3>
<p>Open the <code class="docutils literal notranslate"><span class="pre">8.app_control.ino</span></code> file in the <code class="docutils literal notranslate"><span class="pre">esp-4wd\example\Arduino\8.app_control</span></code> path.</p>
<a class="reference internal image-reference" href="_images/arduino_app11.png"><img alt="_images/arduino_app11.png" class="align-center" src="_images/arduino_app11.png" style="width: 180px;" /></a>
</div>
<div class="section" id="ap-mode">
<h3>AP mode<a class="headerlink" href="#ap-mode" title="Permalink to this headline">¶</a></h3>
<p>There are two ways to establish communication between Sunfounder Controller
and ESP32 RDP: One is AP mode, the other is STA mode. We can switch the
communication mode by modifying the code of app_control.ino.</p>
<p>If you want to use AP mode, you need to connect Sunfounder Contorller to the hotspot released by ESP32 RDP.
Move the code to line 6, please set SSID and PSK here (The NAME in the code is both the SSID and the name of the car). If you have
more than one EPS-4WD Cars, you need to set different NAMEs for them to avoid a wrong connection.
In addition, you need to set a password of more than 8 digits.</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="cp">#define NAME &quot;ESP-4WD Car&quot;</span>
<span class="cp">#define AP_PASSWORD &quot;123456789&quot;</span>
</pre></div>
</div>
<p><strong>Note: Click File -&gt; Preferences, and then select the Display line numbers option to display the number of lines of arduino code.</strong></p>
<p>Then modify the content of line 10 and define the <code class="docutils literal notranslate"><span class="pre">SWITCH_MODE</span></code> variable as “ap”.</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="cp">#define SWITCH_MODE &quot;ap&quot;</span>
</pre></div>
</div>
<p>After downloading the code, ESP32 RDP will send a hotspot signal, then take out your
electronic device, open the WLAN management interface and connect to the wifi
network.</p>
<a class="reference internal image-reference" href="_images/arduino_app12.png"><img alt="_images/arduino_app12.png" class="align-center" src="_images/arduino_app12.png" style="width: 400px;" /></a>
<p>Open Sunfounder Controller and click the Connect icon on the top right.</p>
<a class="reference internal image-reference" href="_images/arduino_app_new1.png"><img alt="_images/arduino_app_new1.png" class="align-center" src="_images/arduino_app_new1.png" style="width: 300px;" /></a>
<p>A prompt box will appear if the connection is successful.</p>
<a class="reference internal image-reference" href="_images/arduino_app_new2.png"><img alt="_images/arduino_app_new2.png" class="align-center" src="_images/arduino_app_new2.png" style="width: 400px;" /></a>
<p>And the name of the car will be displayed on APP.</p>
<a class="reference internal image-reference" href="_images/arduino_app_new3.png"><img alt="_images/arduino_app_new3.png" class="align-center" src="_images/arduino_app_new3.png" style="width: 300px;" /></a>
</div>
<div class="section" id="sta-mode">
<h3>STA mode<a class="headerlink" href="#sta-mode" title="Permalink to this headline">¶</a></h3>
<p>If you want to use STA mode, you need to connect Sunfounder Controller and ESP32 RDP to the same LAN.
Turn the code to line 8, there are two macros that define the wifi information. ESP32
RDP will search for and connect to this wifi, and at the same time your electronic
device should connect to this wifi.</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="cp">#define STA_NAME &quot;MakerStarsHall&quot;</span>
<span class="cp">#define STA_PASSWORD &quot;sunfounder&quot;</span>
</pre></div>
</div>
<p>Then modify the content of line 10 and define the <code class="docutils literal notranslate"><span class="pre">SWITCH_MODE</span></code> variable as “sta”.</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="cp">#define SWITCH_MODE &quot;sta&quot;</span>
</pre></div>
</div>
<p>After downloading the code, ESP32 RDP will automatically connect to the wifi network, and at the same time take out your electronic device, open the WLAN management interface
and connect to this wifi network.</p>
<a class="reference internal image-reference" href="_images/arduino_app13_.png"><img alt="_images/arduino_app13_.png" class="align-center" src="_images/arduino_app13_.png" style="width: 400px;" /></a>
<p>Open Sunfounder Controller and click the Connect icon on the top right.</p>
<a class="reference internal image-reference" href="_images/arduino_app_new1.png"><img alt="_images/arduino_app_new1.png" class="align-center" src="_images/arduino_app_new1.png" style="width: 300px;" /></a>
<p>Find the car name in the pop-up window and click on it.</p>
<a class="reference internal image-reference" href="_images/arduino_app_new4.png"><img alt="_images/arduino_app_new4.png" class="align-center" src="_images/arduino_app_new4.png" style="width: 450px;" /></a>
<p>After connecting, the name of the car will be displayed on APP.</p>
<a class="reference internal image-reference" href="_images/arduino_app_new3.png"><img alt="_images/arduino_app_new3.png" class="align-center" src="_images/arduino_app_new3.png" style="width: 300px;" /></a>
</div>
</div>
<div class="section" id="app-operation">
<h2>APP Operation<a class="headerlink" href="#app-operation" title="Permalink to this headline">¶</a></h2>
<p>Download this code, and then using any of the above methods to establish
communication.</p>
<div class="section" id="add-widget">
<h3>Add Widget<a class="headerlink" href="#add-widget" title="Permalink to this headline">¶</a></h3>
<p>Open Sunfounder Controller, and then create an empty controller.</p>
<a class="reference internal image-reference" href="_images/arduino_app3.png"><img alt="_images/arduino_app3.png" class="align-center" src="_images/arduino_app3.png" style="width: 450px;" /></a>
<p>As shown in the figure, select the corresponding widget for the controller. After
adding, click the icon in the upper right corner to save the configuration.</p>
<a class="reference internal image-reference" href="_images/arduino_app14_.png"><img alt="_images/arduino_app14_.png" class="align-center" src="_images/arduino_app14_.png" style="width: 450px;" /></a>
<p>Click the start button in the upper right corner, and then try to use this controller to
control ESP-4WD Car.</p>
<p>Widget A is used to display the driving speed of the car.</p>
<p>Widget D is used to simulate radar scanning.</p>
<p>Widget H is used to control the driving speed of the car.</p>
<p>Widget K is used to control the driving direction of the car.</p>
<p>Widget L is used to display the detection result of the grayscale sensor.</p>
<p>Widget M is used to control the on and off of the RGB board.</p>
<a class="reference internal image-reference" href="_images/arduino_app15.png"><img alt="_images/arduino_app15.png" class="align-center" src="_images/arduino_app15.png" style="width: 450px;" /></a>
</div>
</div>
<div class="section" id="diy-remote-control">
<h2>DIY Remote Control<a class="headerlink" href="#diy-remote-control" title="Permalink to this headline">¶</a></h2>
<p>If you want to DIY a new remote control, you need to understand the communication process between the ESP32 RDP and the Sunfounder Controller. open the
<code class="docutils literal notranslate"><span class="pre">9.test_control.ino</span></code> file in the <code class="docutils literal notranslate"><span class="pre">esp-4wd\Arduino\example\9.test_control</span></code>. You will go through this code to see how they communicate with each other.</p>
<div class="section" id="program-framework">
<h3>Program framework<a class="headerlink" href="#program-framework" title="Permalink to this headline">¶</a></h3>
<p>First, let us understand the general operating framework of the program.</p>
<p>Turn the code to line 103. In <code class="docutils literal notranslate"><span class="pre">setup()</span></code>, the temp_data variable defines the device
information and proofreading information of ESP-4WD Car, and sends it to
Sunfounder Controller through the <code class="docutils literal notranslate"><span class="pre">deserializeJson()</span></code> function.</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">void</span> <span class="nf">setup</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">String</span> <span class="n">stringone</span> <span class="o">=</span> <span class="s">&quot;{</span><span class="se">\&#39;</span><span class="s">Name</span><span class="se">\&#39;</span><span class="s">:</span><span class="se">\&quot;</span><span class="s">&quot;</span><span class="p">;</span>
    <span class="n">String</span> <span class="n">stringtwo</span> <span class="o">=</span> <span class="s">&quot;</span><span class="se">\&quot;</span><span class="s">, </span><span class="se">\&#39;</span><span class="s">Type</span><span class="se">\&#39;</span><span class="s">:</span><span class="se">\&quot;</span><span class="s">ESP-4WD Car</span><span class="se">\&quot;</span><span class="s">, </span><span class="se">\&#39;</span><span class="s">Check</span><span class="se">\&#39;</span><span class="s">:</span><span class="se">\&quot;</span><span class="s">SunFounder Controller</span><span class="se">\&quot;</span><span class="s">}&quot;</span><span class="p">;</span>
    <span class="n">temp_data</span> <span class="o">=</span> <span class="n">stringone</span> <span class="o">+</span> <span class="n">String</span><span class="p">(</span><span class="n">AP_NAME</span><span class="p">)</span> <span class="o">+</span> <span class="n">stringtwo</span><span class="p">;</span>
    <span class="n">deserializeJson</span><span class="p">(</span><span class="n">doc_send</span><span class="p">,</span> <span class="n">temp_data</span><span class="p">);</span>
</pre></div>
</div>
<p>This if statement is used to determine the communication mode between ESP32 RDP
and Sunfounder Controller. You can change the communication mode by modifying
<code class="docutils literal notranslate"><span class="pre">SWITCH_MODE</span></code>.</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="k">if</span><span class="p">(</span><span class="n">SWITCH_MODE</span> <span class="o">==</span> <span class="s">&quot;ap&quot;</span><span class="p">)</span>
<span class="p">{</span>
    <span class="n">WiFi</span><span class="p">.</span><span class="n">softAP</span><span class="p">(</span><span class="n">AP_NAME</span><span class="p">,</span> <span class="n">AP_PASSWORD</span><span class="p">);</span>
    <span class="p">...</span>
<span class="p">}</span>
<span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="n">SWITCH_MODE</span> <span class="o">==</span> <span class="s">&quot;sta&quot;</span><span class="p">)</span>
<span class="p">{</span>
    <span class="n">WiFi</span><span class="p">.</span><span class="n">begin</span><span class="p">(</span><span class="n">STA_NAME</span><span class="p">,</span> <span class="n">STA_PASSWORD</span><span class="p">);</span>
    <span class="p">...</span>
<span class="p">}</span>
</pre></div>
</div>
<p>These two lines of statements indicate that the APP service starts running and enters
the event processing process.</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="n">webSocket</span><span class="p">.</span><span class="n">begin</span><span class="p">();</span>
<span class="n">webSocket</span><span class="p">.</span><span class="n">onEvent</span><span class="p">(</span><span class="n">onWebSocketEvent</span><span class="p">);</span>
</pre></div>
</div>
<p>Then, we turn the code to line 26, <code class="docutils literal notranslate"><span class="pre">onWebSocketEvent()</span></code> is the event handling function,
which uses the switch statement to determine the event type. The event types that
the current program can trigger are <code class="docutils literal notranslate"><span class="pre">WStype_DISCONNECTED</span></code>, <code class="docutils literal notranslate"><span class="pre">WStype_CONNECTED</span></code>,
and <code class="docutils literal notranslate"><span class="pre">WStype_TEXT</span></code>.</p>
<p><code class="docutils literal notranslate"><span class="pre">WStype_DISCONNECTED</span></code> is a disconnected event. The processing method is to print
the disconnected information.</p>
<p><code class="docutils literal notranslate"><span class="pre">WStype_CONNECTED</span></code> is a connected event. The processing method is to print
the connection information, and then send the device information to Sunfounder
Controller.</p>
<p><code class="docutils literal notranslate"><span class="pre">WStype_TEXT</span></code> is a sending and receiving event, and we will process the received and
sent string information in this event.</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">void</span> <span class="nf">onWebSocketEvent</span><span class="p">(</span><span class="kt">uint8_t</span> <span class="n">client_num</span><span class="p">,</span>
                    <span class="n">WStype_t</span> <span class="n">type</span><span class="p">,</span>
                    <span class="kt">uint8_t</span> <span class="o">*</span> <span class="n">payload</span><span class="p">,</span>
                    <span class="kt">size_t</span> <span class="n">length</span><span class="p">)</span> <span class="p">{</span>
<span class="kt">char</span> <span class="n">output</span><span class="p">[</span><span class="mi">300</span><span class="p">];</span>
<span class="c1">// Figure out the type of WebSocket event</span>
<span class="k">switch</span><span class="p">(</span><span class="n">type</span><span class="p">)</span> <span class="p">{</span>

    <span class="c1">// Client has disconnected</span>
    <span class="k">case</span> <span class="nl">WStype_DISCONNECTED</span><span class="p">:</span>
    <span class="n">Serial</span><span class="p">.</span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;[%u] Disconnected!</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">client_num</span><span class="p">);</span>
    <span class="k">break</span><span class="p">;</span>

    <span class="c1">// New client has connected</span>
    <span class="k">case</span> <span class="nl">WStype_CONNECTED</span><span class="p">:</span>
    <span class="p">{</span>
        <span class="n">IPAddress</span> <span class="n">ip</span> <span class="o">=</span> <span class="n">webSocket</span><span class="p">.</span><span class="n">remoteIP</span><span class="p">(</span><span class="n">client_num</span><span class="p">);</span>
        <span class="n">Serial</span><span class="p">.</span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;[%u] Connection from &quot;</span><span class="p">,</span> <span class="n">client_num</span><span class="p">);</span>
        <span class="n">Serial</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="n">ip</span><span class="p">.</span><span class="n">toString</span><span class="p">());</span>
        <span class="n">webSocket</span><span class="p">.</span><span class="n">sendTXT</span><span class="p">(</span><span class="n">client_num</span><span class="p">,</span> <span class="n">temp_data</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="k">break</span><span class="p">;</span>

    <span class="k">case</span> <span class="nl">WStype_TEXT</span><span class="p">:</span>
        <span class="p">...</span>
</pre></div>
</div>
<p>By modifying the content of the <code class="docutils literal notranslate"><span class="pre">WStype_TEXT</span></code> event, we
can understand the data receiving and sending process between ESP-4WD Car and
Sunfounder Controller.</p>
</div>
<div class="section" id="receiving">
<h3>Receiving<a class="headerlink" href="#receiving" title="Permalink to this headline">¶</a></h3>
<p>The ESP32 RDP receives data from the Sunfounder Controller and sends its own sensor data to the Sunfounder Controller.
Let’s find out what data ESP32 RDP receives from Sunfounder Controller.</p>
<p><strong>Step 1: Create a remote control</strong></p>
<p>Download this code, re-establish communication, and then open Sunfounder Controller to create
a new controller. We add a slider in the H area and a cross-shaped steering wheel in the K area. After
adding, click the icon in the upper right corner to save.</p>
<a class="reference internal image-reference" href="_images/arduino_app16.png"><img alt="_images/arduino_app16.png" class="align-center" src="_images/arduino_app16.png" style="width: 450px;" /></a>
<p><strong>Step 2: Received values</strong></p>
<p>Turn the code to line 53, in this if statement, we print out the string data (payload
variable) received from Sunfounder Controller.</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="k">if</span><span class="p">(</span><span class="n">strcmp</span><span class="p">((</span><span class="kt">char</span> <span class="o">*</span> <span class="p">)</span><span class="n">payload</span><span class="p">,</span> <span class="n">temp_recv</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">)</span>
<span class="p">{</span>
    <span class="n">memset</span><span class="p">(</span><span class="n">temp_recv</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">300</span><span class="p">);</span>
    <span class="n">Serial</span><span class="p">.</span><span class="n">printf</span><span class="p">(</span><span class="s">&quot; Received text: %s</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">payload</span><span class="p">);</span>
    <span class="n">memcpy</span><span class="p">(</span><span class="n">temp_recv</span><span class="p">,</span> <span class="p">(</span><span class="kt">char</span> <span class="o">*</span><span class="p">)</span><span class="n">payload</span><span class="p">,</span> <span class="n">strlen</span><span class="p">((</span><span class="kt">char</span> <span class="o">*</span><span class="p">)</span><span class="n">payload</span><span class="p">));</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Click the start icon in the upper right corner to run the controller.</p>
<a class="reference internal image-reference" href="_images/arduino_app17.png"><img alt="_images/arduino_app17.png" class="align-center" src="_images/arduino_app17.png" style="width: 250px;" /></a>
<p>Open the serial debugging assistant of arduino, we can find that the initial data of K
control is the string “stop”, and the initial data of H widget is the int value 50.</p>
<a class="reference internal image-reference" href="_images/arduino_app18.png"><img alt="_images/arduino_app18.png" class="align-center" src="_images/arduino_app18.png" style="width: 450px;" /></a>
<p>Press the arrow keys of the cross-shaped steering wheel in the K area and slide the slider in the H area.</p>
<a class="reference internal image-reference" href="_images/arduino_app19.png"><img alt="_images/arduino_app19.png" class="align-center" src="_images/arduino_app19.png" style="width: 450px;" /></a>
<p>You can see that the cross-shaped steering
wheel widget sends a string of data (“forward”, “backward”, “left”, “right”) to the ESP-
4WD RDP. The slider widget will send an int data (range: 0-100) to the ESP-4WD RDP.</p>
<a class="reference internal image-reference" href="_images/arduino_app20.png"><img alt="_images/arduino_app20.png" class="align-center" src="_images/arduino_app20.png" style="width: 450px;" /></a>
<p><strong>Step 3: Response</strong></p>
<p>When ESP-4WD Car receives data from different controls of Sunfounder Controller, it needs to respond accordingly.
Let’s write a piece of code that uses the widgets on the Sunfounder Controller
to control the movement of the car. The K widget(cross-shaped steering wheel) controls
the direction of the car, and the H widget(slider) controls the speed of the car.</p>
<p>By modifying the content of the <code class="docutils literal notranslate"><span class="pre">WStype_TEXT</span></code> event, we can use the Sunfounder Controller widget to control the movement of the cart.
Turn the code to line 62, we add the following code in this line.</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="n">car</span><span class="p">.</span><span class="n">move</span><span class="p">(</span><span class="n">doc_recv</span><span class="p">[</span><span class="s">&quot;K_region&quot;</span><span class="p">],</span> <span class="n">doc_recv</span><span class="p">[</span><span class="s">&quot;H_region&quot;</span><span class="p">]);</span>
</pre></div>
</div>
<p>After adding it, let’s get to know the content of the <code class="docutils literal notranslate"><span class="pre">WStype_TEXT</span></code> event. (There are some commented contents not shown, please don’t remove them.</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="k">case</span> <span class="nl">WStype_TEXT</span><span class="p">:</span>
    <span class="k">if</span><span class="p">(</span><span class="n">strcmp</span><span class="p">((</span><span class="kt">char</span> <span class="o">*</span> <span class="p">)</span><span class="n">payload</span><span class="p">,</span> <span class="n">temp_recv</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">memset</span><span class="p">(</span><span class="n">temp_recv</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">300</span><span class="p">);</span>
        <span class="n">Serial</span><span class="p">.</span><span class="n">printf</span><span class="p">(</span><span class="s">&quot; Received text: %s</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">payload</span><span class="p">);</span>
        <span class="n">memcpy</span><span class="p">(</span><span class="n">temp_recv</span><span class="p">,</span> <span class="p">(</span><span class="kt">char</span> <span class="o">*</span><span class="p">)</span><span class="n">payload</span><span class="p">,</span> <span class="n">strlen</span><span class="p">((</span><span class="kt">char</span> <span class="o">*</span><span class="p">)</span><span class="n">payload</span><span class="p">));</span>
    <span class="p">}</span>
<span class="hll">    <span class="n">deserializeJson</span><span class="p">(</span><span class="n">doc_recv</span><span class="p">,</span> <span class="n">payload</span><span class="p">);</span>
</span><span class="hll">    <span class="n">car</span><span class="p">.</span><span class="n">move</span><span class="p">(</span><span class="n">doc_recv</span><span class="p">[</span><span class="s">&quot;K_region&quot;</span><span class="p">],</span> <span class="n">doc_recv</span><span class="p">[</span><span class="s">&quot;H_region&quot;</span><span class="p">]);</span>
</span>    <span class="n">serializeJson</span><span class="p">(</span><span class="n">doc_send</span><span class="p">,</span> <span class="n">output</span><span class="p">);</span>
    <span class="k">if</span><span class="p">(</span><span class="n">strcmp</span><span class="p">(</span><span class="n">output</span><span class="p">,</span> <span class="n">temp_send</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">memset</span><span class="p">(</span><span class="n">temp_send</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">300</span><span class="p">);</span>
        <span class="n">Serial</span><span class="p">.</span><span class="n">printf</span><span class="p">(</span><span class="s">&quot; Send text: %s</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">output</span><span class="p">);</span>
        <span class="n">memcpy</span><span class="p">(</span><span class="n">temp_send</span><span class="p">,</span> <span class="n">output</span><span class="p">,</span> <span class="n">strlen</span><span class="p">(</span><span class="n">output</span><span class="p">));</span>
      <span class="p">}</span>
    <span class="n">webSocket</span><span class="p">.</span><span class="n">sendTXT</span><span class="p">(</span><span class="n">client_num</span><span class="p">,</span> <span class="n">output</span><span class="p">);</span>
    <span class="k">break</span><span class="p">;</span>
</pre></div>
</div>
<p>before we get to know the content of the <code class="docutils literal notranslate"><span class="pre">WStype_TEXT</span></code> event，turn the code to line 19, where a global variable <code class="docutils literal notranslate"><span class="pre">doc_recv</span></code> that
can store json objects(similar to the structure of C language) is defined, which is used to receive string
data from Sunfounder Controller.</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="n">DynamicJsonDocument</span> <span class="nf">doc_recv</span><span class="p">(</span><span class="mi">1024</span><span class="p">);</span>
</pre></div>
</div>
<p>Go back to <code class="docutils literal notranslate"><span class="pre">WStype_TEXT</span></code> event, Through the function <code class="docutils literal notranslate"><span class="pre">deserializeJson(</span> <span class="pre">)</span></code>, the payload variable (the string data
received from the Sunfounder Controller) is converted into an operable <code class="docutils literal notranslate"><span class="pre">doc_recv</span></code> variable.</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="n">deserializeJson</span><span class="p">(</span><span class="n">doc_recv</span><span class="p">,</span> <span class="n">payload</span><span class="p">);</span>
</pre></div>
</div>
<p>The value of <code class="docutils literal notranslate"><span class="pre">doc_recv[&quot;K_region&quot;]</span></code> is the string data (“forward”, “backward”,”left”,
“right”) sent by the K widget (cross-shaped steering wheel), the same as the value of
<code class="docutils literal notranslate"><span class="pre">doc_recv[&quot;H_region&quot;]</span></code> is the int data sent by H widget (slide) (range: 0-100).</p>
<p>Pass <code class="docutils literal notranslate"><span class="pre">doc_recv[&quot;K_region&quot;]</span></code> as the first parameter to the <code class="docutils literal notranslate"><span class="pre">car.move()</span></code> function to control
the direction of the ESP-4WD Car. Pass <code class="docutils literal notranslate"><span class="pre">doc_recv[&quot;H_region&quot;]</span></code> as the second parameter
to the <code class="docutils literal notranslate"><span class="pre">car.move()</span></code> function to control the speed of ESP-4WD Car.</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="n">car</span><span class="p">.</span><span class="n">move</span><span class="p">(</span><span class="n">doc_recv</span><span class="p">[</span><span class="s">&quot;K_region&quot;</span><span class="p">],</span> <span class="n">doc_recv</span><span class="p">[</span><span class="s">&quot;H_region&quot;</span><span class="p">]);</span>
</pre></div>
</div>
<p>After downloading the modified code and re-establishing communication, open the
controller and click the start icon in the upper right corner to run the controller.
The cross-shaped steering wheel in the K area can control the direction of the ESP-
4WD Car, and the slider in the H area can control the speed of the ESP-4WD Car.</p>
<a class="reference internal image-reference" href="_images/arduino_app17.png"><img alt="_images/arduino_app17.png" class="align-center" src="_images/arduino_app17.png" style="width: 250px;" /></a>
</div>
<div class="section" id="sending">
<h3>Sending<a class="headerlink" href="#sending" title="Permalink to this headline">¶</a></h3>
<p>Let’s take a closer look at how the ESP32 RDP sends its own sensor data to the Sunfounder Controller.</p>
<p><strong>Step 1: Create a remote control</strong></p>
<p>Go back to <code class="docutils literal notranslate"><span class="pre">WStype_TEXT</span></code> event, cancel the comment in lines 67-71, to enable this code.</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="n">car</span><span class="p">.</span><span class="n">get_grayscale</span><span class="p">();</span>
<span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="mi">3</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
<span class="p">{</span>
    <span class="n">doc_send</span><span class="p">[</span><span class="s">&quot;L_region&quot;</span><span class="p">][</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">car</span><span class="p">.</span><span class="n">adc_value</span><span class="p">[</span><span class="n">i</span><span class="p">];</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Download this code, re-establish communication, and then open Sunfounder Controller to create
a new controller. We add a grayscale detection tool in the L area. After adding,
click the icon in the upper right corner to save.</p>
<a class="reference internal image-reference" href="_images/arduino_app21.png"><img alt="_images/arduino_app21.png" class="align-center" src="_images/arduino_app21.png" style="width: 450px;" /></a>
<p><strong>Step 2: Received values</strong></p>
<p>Turn the code to line 77. In this if statement, we print the output variable (the string
information that stores the sensor data).</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="k">if</span><span class="p">(</span><span class="n">strcmp</span><span class="p">(</span><span class="n">output</span><span class="p">,</span> <span class="n">temp_send</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">)</span>
<span class="p">{</span>
    <span class="n">memset</span><span class="p">(</span><span class="n">temp_send</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">300</span><span class="p">);</span>
    <span class="n">Serial</span><span class="p">.</span><span class="n">printf</span><span class="p">(</span><span class="s">&quot; Send text: %s</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">output</span><span class="p">);</span>
    <span class="n">memcpy</span><span class="p">(</span><span class="n">temp_send</span><span class="p">,</span> <span class="n">output</span><span class="p">,</span> <span class="n">strlen</span><span class="p">(</span><span class="n">output</span><span class="p">));</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Click the start icon in the upper right corner to run the controller.</p>
<a class="reference internal image-reference" href="_images/arduino_app17.png"><img alt="_images/arduino_app17.png" class="align-center" src="_images/arduino_app17.png" style="width: 250px;" /></a>
<p>Open the serial debugging assistant of arduino, you will see that the ESP-4WD RDP has been sending
device information, calibration information and the value of the grayscale sensor to
the Sunfounder Controller.</p>
<a class="reference internal image-reference" href="_images/arduino_app22.png"><img alt="_images/arduino_app22.png" class="align-center" src="_images/arduino_app22.png" style="width: 450px;" /></a>
<p><strong>Step 3: Response</strong></p>
<p>Let’s write a piece of code that display the sensor data of ESP-4WD RDP on the
widget of Sunfounder Controller. Widget D (grayscale detection tool) will show you the grayscale of the ground.</p>
<p>Let’s re-explain the content of the <code class="docutils literal notranslate"><span class="pre">WStype_TEXT</span></code> event.</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="k">case</span> <span class="nl">WStype_TEXT</span><span class="p">:</span>
    <span class="k">if</span><span class="p">(</span><span class="n">strcmp</span><span class="p">((</span><span class="kt">char</span> <span class="o">*</span> <span class="p">)</span><span class="n">payload</span><span class="p">,</span> <span class="n">temp_recv</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">memset</span><span class="p">(</span><span class="n">temp_recv</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">300</span><span class="p">);</span>
        <span class="n">Serial</span><span class="p">.</span><span class="n">printf</span><span class="p">(</span><span class="s">&quot; Received text: %s</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">payload</span><span class="p">);</span>
        <span class="n">memcpy</span><span class="p">(</span><span class="n">temp_recv</span><span class="p">,</span> <span class="p">(</span><span class="kt">char</span> <span class="o">*</span><span class="p">)</span><span class="n">payload</span><span class="p">,</span> <span class="n">strlen</span><span class="p">((</span><span class="kt">char</span> <span class="o">*</span><span class="p">)</span><span class="n">payload</span><span class="p">));</span>
    <span class="p">}</span>
    <span class="n">deserializeJson</span><span class="p">(</span><span class="n">doc_recv</span><span class="p">,</span> <span class="n">payload</span><span class="p">);</span>
    <span class="n">car</span><span class="p">.</span><span class="n">move</span><span class="p">(</span><span class="n">doc_recv</span><span class="p">[</span><span class="s">&quot;K_region&quot;</span><span class="p">],</span> <span class="n">doc_recv</span><span class="p">[</span><span class="s">&quot;H_region&quot;</span><span class="p">]);</span>
    <span class="n">car</span><span class="p">.</span><span class="n">get_grayscale</span><span class="p">();</span>
<span class="hll">    <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="mi">3</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
</span><span class="hll">    <span class="p">{</span>
</span><span class="hll">        <span class="n">doc_send</span><span class="p">[</span><span class="s">&quot;L_region&quot;</span><span class="p">][</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">car</span><span class="p">.</span><span class="n">adc_value</span><span class="p">[</span><span class="n">i</span><span class="p">];</span>
</span><span class="hll">    <span class="p">}</span>
</span><span class="hll">    <span class="n">serializeJson</span><span class="p">(</span><span class="n">doc_send</span><span class="p">,</span> <span class="n">output</span><span class="p">);</span>
</span><span class="hll">    <span class="k">if</span><span class="p">(</span><span class="n">strcmp</span><span class="p">(</span><span class="n">output</span><span class="p">,</span> <span class="n">temp_send</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">)</span>
</span><span class="hll">    <span class="p">{</span>
</span><span class="hll">        <span class="n">memset</span><span class="p">(</span><span class="n">temp_send</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">300</span><span class="p">);</span>
</span><span class="hll">        <span class="n">Serial</span><span class="p">.</span><span class="n">printf</span><span class="p">(</span><span class="s">&quot; Send text: %s</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">output</span><span class="p">);</span>
</span><span class="hll">        <span class="n">memcpy</span><span class="p">(</span><span class="n">temp_send</span><span class="p">,</span> <span class="n">output</span><span class="p">,</span> <span class="n">strlen</span><span class="p">(</span><span class="n">output</span><span class="p">));</span>
</span><span class="hll">    <span class="p">}</span>
</span><span class="hll">    <span class="n">webSocket</span><span class="p">.</span><span class="n">sendTXT</span><span class="p">(</span><span class="n">client_num</span><span class="p">,</span> <span class="n">output</span><span class="p">);</span>
</span><span class="hll">    <span class="k">break</span><span class="p">;</span>
</span></pre></div>
</div>
<p>before we get to know the content of the <code class="docutils literal notranslate"><span class="pre">WStype_TEXT</span></code> event，turn the code to line 18, where the global variable <code class="docutils literal notranslate"><span class="pre">doc_send</span></code>
that can store the json object (similar to the structure of the c language) is defined,
which is used to send the sensor data of the Sunfounder Controller.</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="n">DynamicJsonDocument</span> <span class="nf">doc_send</span><span class="p">(</span><span class="mi">1024</span><span class="p">);</span>
</pre></div>
</div>
<p>With the <code class="docutils literal notranslate"><span class="pre">car.get_grayscale()</span></code> function, we can get the detection values of the three probes of the grayscale sensor. From left to right, they are <code class="docutils literal notranslate"><span class="pre">car.adc_value[0]</span></code> , <code class="docutils literal notranslate"><span class="pre">car.adc_value[1]</span></code> and <code class="docutils literal notranslate"><span class="pre">car.adc_value[2]</span></code> , they are stored in <code class="docutils literal notranslate"><span class="pre">doc_send[&quot;L_region&quot;]</span></code> in turn.</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="n">car</span><span class="p">.</span><span class="n">get_grayscale</span><span class="p">();</span>
<span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="mi">3</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
<span class="p">{</span>
    <span class="n">doc_send</span><span class="p">[</span><span class="s">&quot;L_region&quot;</span><span class="p">][</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">car</span><span class="p">.</span><span class="n">adc_value</span><span class="p">[</span><span class="n">i</span><span class="p">];</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Use the function <code class="docutils literal notranslate"><span class="pre">serializeJson()</span></code> to convert the <code class="docutils literal notranslate"><span class="pre">doc_send</span></code> variable (stored sensor
data) into an output variable (a string type that can be recognized by Sunfounder
Controller).</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="n">serializeJson</span><span class="p">(</span><span class="n">doc_send</span><span class="p">,</span> <span class="n">output</span><span class="p">);</span>
</pre></div>
</div>
<p>Send the <code class="docutils literal notranslate"><span class="pre">client_num</span></code> variable (storing the device information and proofreading
information of the ESP-4WD RDP) and output variable to Sunfounder Controller.</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="n">webSocket</span><span class="p">.</span><span class="n">sendTXT</span><span class="p">(</span><span class="n">client_num</span><span class="p">,</span> <span class="n">output</span><span class="p">);</span>
</pre></div>
</div>
<p>Back in the remote control interface, Widget D (grayscale detection tool) is showing the current ground conditions, if you want to know more about the controls, please go back to
Widget List to see.</p>
<a class="reference internal image-reference" href="_images/arduino_app23.png"><img alt="_images/arduino_app23.png" class="align-center" src="_images/arduino_app23.png" style="width: 250px;" /></a>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="For%20Python%20User.html" class="btn btn-neutral float-right" title="For Python User" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="code_control_arduino.html" class="btn btn-neutral float-left" title="Code Control" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2021, SunFounder.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>